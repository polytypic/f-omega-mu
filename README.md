# Fωμ type checker &mdash; [![Build Status](https://travis-ci.org/polytypic/f-omega-mu.svg?branch=main)](https://travis-ci.org/polytypic/f-omega-mu)

A type checker for Fωμ roughly based on the article

<blockquote>
  <dl>
    <dt>
      <a href="https://dl.acm.org/doi/10.1145/2914770.2837660">
        System F-omega with Equirecursive Types for Datatype-generic Programming
      </a>
    </dt>
    <dd>Yufei Cai, Paolo G. Giarrusso, and Klaus Ostermann</dd>
  </dl>
</blockquote>

This is still very much Work-in-Progress with tons of missing features and
probably more bugs than one could imagine.

## Next steps

- Try the online playground:
  - [The traditional `fact`orial function](https://polytypic.github.io/f-omega-mu/#MQAgKgFgpiAuBOBDAJgS1qg9gO0QGxAAMAzRAY1kM3lXxGIFdsKtsAoNvKWe8ngXhCAe4FIUAXKmyxASYSTYAOjYgQgbuBsEqYuXLUxENhCATIhABGJdtjQDZ7SCh4AzjAMAqXhRAAKAwFpTAShBJNlEeAFYgA)
  - [Iterative `fib`onacci function](https://polytypic.github.io/f-omega-mu/#MQAgkgLgpgTghhAlgNyiABgM0QI3QewDs4BjExETAV0JKSICgGAbKCS3EAXgZBFfbN8+AA7cQgHuAhogFyJC7QEmEIeUpUKQy1QDpefEIG7gRHIXaDAKxMQzhK7v37EmEIRCATIhAAGPQ4gALKFdEH30oZgBnNGkxcxAACgoAahBzAEp41wBaEABGdPk9aK9c9SZsHFzPIA)
  - [Recursive `list` type encoding and `fold` function](https://polytypic.github.io/f-omega-mu/#MQAgSgpgxgrgTgZwJYDcIgAYBskIC4Yh4CeADuhAHZQD2AJkpQOYgCGldmAZjVnYVxjU8SGpQBQ4rBDxEy6HPhABeEIG7gPADpAPcCKtgACI4mgN6UkWAFwg4AGhC1KCK7MBJhCD0g3cAL6frIRklpWTMsFRBAbOAtCKM1KAtTcytbezEnIj8PV2tvTShNUICJYNTHcKjNNQALOgstDUsszRjK+MTLazsHdOysvx88vLSQGqIwwKkZEB4+cuijbRnagApsuH6ASn7M3Fk1yq5KOu2vSoAvC1iADycm8RAQG4BtOABdEHbws67h1TUruqVG4WJpLaaUEDLQ6PEBnLY3XwTEqkJAAfQYTCQeAQ4W6T0YeHeAGZIXiCe8AIyktL4yiEkAAFmpjlp9Kpy1CrNeGx5WwmSy5XMh-wsBMqTjFVxAAGoQAgtgAGEAo9FITHYoA)
  - [Generic `fold`](https://polytypic.github.io/f-omega-mu/#MQAg4gpgdhBOCWBjEADAZgewDYBMUCh8sIAXEEgTwAcIQAxAVykRI1hAF4RBu4DQC4AVICTCAQDpAAEQBDCQCNRACkkghIGQEplIeWhBKVO9SHhRCxMplyd8IEIGzgfsLG8AtpKp96TFmxBpR1mztpbkksAHMIGVhJDx09XX9AwMAe4BwMOmwcD2TtDRVpAKSbbgA3bNzEoqTQiKilbVcqAG0ctDUAXSbJdpA0jMsSjWNCCxwgA)
  - [List using a recursive sum type](https://polytypic.github.io/f-omega-mu/#MQAgMglgzgLiCuUIDsDmICGIBOBTAxvNkgG64hTwC2IMAngA64BQzANrnPUyG9HAF4QgbuAAFgBMAdIB7gGG0kBtZBDYAuEAG8AvgBoQ+APbIo6jRL1ytAXRApWHOMrYghgbOAYipy81aQ6vrC0NnbsnPpGUN7ukmLiqh7CcqoBXIqGxt5m4hZsvv78QbbI9mEoAGYoEDC4APJlUQkS8TJJKbSS6VAKMDYStM4hDrQYANa4AHINLaMT6ihwgEmEvAWLy4EezCAiyKrzMQAeJm0bW1sQ9cgggCZEIAAMtKK4xaenTt1Wm6e4bFAsL1uHfQYX6aT7-EBeITCAD6qm0kjePR0YP+nW8wnwcKatBy+XWWg6EXe+kkfQAFDAZpMycgALQARgAlCS5IyUVtfCFKWNxgpYNgUKgbABWEBk8qVap1PkwAVoGwAIgAYoBJ4GkCsZQA)
  - [Stack ADT using an existential type](https://polytypic.github.io/f-omega-mu/#MQAgygLghgxg1iAggEQCogK4GcCWA7AcxCjxAFMAPHLCMvCHKAGxAgE8AHMgKG6bIitOZEAHsODUaQC8IQN3AANwB0AbTxSyALhABvAL4AaEFlEBbLSAUBdEPj4ChXEE2qDZipYB7gFzVV4cTNr6RjBSWEEAFgAm2gpGEIHOrno2dvaC7E6QsAjuNDmaAFQggEmEIIVKOtwg5KYSbNqAAETK+fCWBtUgHNgRTcoKpcbQbQNlrQhxnRzifUrjloPikqQ6CswYFnFDBdsjetx6tni8-BCAUAzZ8AD044DQDNJnVTVkdewgsoDZwMpqAe+6h9ofIJrB0at0sBE-l8lHIKJplLDwkDLKpQngsH8dNE-hR4ixZBQsACkjRLFZQV1xFCEYTNMjlISQDAoFgRE8aiB-Pj5AB9TT6JSdDkgNQaTHEpY4KS6NZMDaxIzjQGuSwpCk1NEY9wAJ350QVrES9L0guFNRUJnMmNlGz+2qU0UVw1yIHtCQlEilKxtmydO2NVk6+z02kAwEQACkucAAlFcgbc0qdiDz5rIo0pwREVPgIDYAKwgSPOjM9bP0GwARkL6czZdzIAAzNXiy96nWrNHO0cTg4IKIecjPspPH2B65NPNRiTgTDwpPTeBi9MOCprMYmSy2ULOWL3HyBdvzVzxSBlaSQdvLSIdfyfQalbsJibDyLNZjsbJ7T68X9R8j7eMxL0oGNSHGkf6uO2ybjEAA)
  - [Stream fusion](https://polytypic.github.io/f-omega-mu/#MQAgygLgTgpghgWxAMwK4GcCWB7AdgKH1ACE50YATEPECACxhAAc4mYoiiRvJZEUMOXAC4QAMSjYkAGUzoI6WtnDR4CRRGUA5bPUy4A5iDgQQAQQA2FrtwAiqXAGM4uEAGFsqCAoA0IAEpSLiDSMOiOdProANaYAJ5+tjSQMADucFAQNiB03kzCAPQFjpgQYTDsAHRyEJVM6KiVlKgFAG6YaRTYjgUNCAgZcQD8XZgAvACMAAyVE7OzUwAslQDsi1MThCRkmI4gsI6oUFitjBY1tHFs+BYwphBXZxdjIIDdwK2VgD3A5-KVANq4TAWUQAbwAvn5HHh0KC6BRRK0-BBgSAfhAwQBdED6Qi3UyyeQgMb4bh4kCAixEkCAbOBagCgVTwSBRGjaFicaS7iAobhFC9aZVXnDhLVXsjhKy6Ty+SAQXCkRYwczURcIOyCJzTPpkPpSjAAPrYZBUgVC+G1T7iyWVaV-NU5KjI7Ea1FciBwaIG1z8i3uz36kTO0yAJMIVYSQ2H7oKRPpRQAPGHWkncbHG1yAEyIQFNaAwXSnyUC7Rjk9wYBZyCWUwnuWRGCDK-mKVTXuDKhSiz4Gynpc25fDaAqWaqwTboUWHSAABR+r1T3AAWgmAEpaBYl12lRzXVrdHBmzHcLVK2SLNhsEwqd8z-lYyBQ6zY4LMMJH13MMbMCAADzknMwVy2rG7JTqe55TpgADUy4rmW5AFhYfxAc6x7XlmyZbiCFKQtCfjarqZSGsgSIel6uG7puBBcDorgHEcJyMDAcY1P+ECYHAlLyHwSAPNceKAFAMvBqL0qiIIA0AzEpqlxsCA8gwBeLxioK6D-F0uAwKCEIgHEHQWP2faiBAg4yZpMSYPkMnqsmZI8YwnFqM2tSAMBEykgnZiCiOgfhqXGEAeXeMllBepjoBRVlcka+qsvycCCgmEoXDFfH1vmblIC8Cado2jGmApcWsjF1bOHByX5vBvYjn8qmMC8TIeYFxggQlS4YplpU9gpjjCPpxhGflFXaWWVAvHsdVyQ1k75c1lZgsmSp1VxxgFPlolbtZ2CRc8NIxa8SWpV52Vgr0onCKlxiVMebrrVFICWldNQnf5+WxTCyldt5piFbWspdtwVXlZUBK1O2cAtT9Wk6UNbzdXARkhQDNSjryfwgxO053eGa6taVMmxPJSgbfIG7IfmmgE8FIlIKtXIDHj1IxdSABGgrICIe6hkzO2uRT+0+Yd6DHadiUlSl3NvdlzZxa92PcO9ICfcVYO-Xg1VQxVf01XNAVjQzFlY9LA26b2wo9auHkjorKZ-AbkN9lSLMOgqVLIprskXjr6Cg9LKamXjrw+yd-w+8qrsgO7xZezN+YuxTodHVTpg6hYZRQCa235GzodnhYgq7dz5IHUdJ0x0LXZ7WLPkSy951e7L8t1hb6uqypyuMtHY17h7evY9bzaddDsPm17+bvsw3KVHCf55kP3BWxDVIjVrF4d+H08gLBMAW-mfxB8NlROqNS+6xbO9vP7ynb7jwf1cvYORym0cLXAccumSrBsLgkN0znYATL0EwC8Xb+AAmXoQCAGP2rimayjwZJUj+D-DyEw-BgCAR5IB6okqlxji8eBEwqQ-0qKdDyntSqywUlXRQRV65ex-s2dAEwTpzAIbLehNYFbT0bi2CqJ94FAPwUAwhMdiFX3bkfaePcFL91NjJCYg9V6z0GoyeUq44G0JePvCybdD6d2PpfchDD6GBz0SAXBVJWHCIPg1D2t8u4phQXQ1B6ABEoLbOLJxbDqFD04a2SqLcNYiO0SQr2EiobGxhtIpxcjp4KMNjVZRTocH2PUZSYhWirFBOlifP2jiBEXzMqovhLx3EWMXuk2+G5ppX0fs-ZMSUIpoiROjQyIAaZ+ETsnPwb9-wUDBKIZyFNhAACp-KDMqMLFM9T7ogEAABEMV8r+UFrY0maJRCzMEY-R6CVbE01WTFaZTNJwZwZiuUMgsFkxwZrY9p7BdmVEOf5BmWcTkBQ2ac4utiukf1uWct5ryXn2TgNNYSXFRLIS4AAUTjIgJgtwQAYDgAYDek4-bxUJK+HgFM95NMQoeFe3BJyCUQJUGmOK1SkqxMiuML5DyVDjCAYZQD1zYwJZi65UByVTleFSx8dKACkIBCkcuXGDFlXFiWsHJRyyl1Lah0ogiAYV09RVqEqJ8ig5LN5TkJQgSokz5AcvQEy1eyqiV6ogAapclqrXJknIDaou4QAAFYlxAA)
  - [First-class type equality witnesses](https://polytypic.github.io/f-omega-mu/#MQAgYglgTgzgLgWgMYBsCGMYjgTwA4CmIBAjgK5ooS4gDu1AdgZswFCsoFzb5EAyBCACMGEAF4gAvCEDdwIEbgAHQzATcALAAESAx4ABcAKhCAkwhA6FGkHIMhTykBAYcuPQuAD2KACZTZileu17D-kYKABRqgM3AJiBhUQCUFqbm1rbsnNy4TgCiJJ4ypLoWgcYA3qwgIM4AZmCublogaopqqtXuZiDWhqRtygA0peUVAsKiYnUN6qpDIuLdFl2JfWVQBBUoY4rzZosgMDgAtnvrEwqbHcTZ1nLbcFBoDDBHTeoRXdbRndmJc59R186PqlOFnMhl6-QqUGch3qjUBPzOZzkrAAvjY7PZuFMRlJ+qkBi0PNJANnAiiJqhkaCEWgJ3QURL8BSUAAstAkFJSANryJSqBLxdoAXRAwSJERkAA9WVEFOK4ky0biHJUsTNiaShEpKVoVRJzBrKQqynjlqtPCS6QyAkpJWzxYaQHjdgczaTyVqdbT6fkrZyfFZ+XIhcEJVLFLL7XibncsGq6apRUohEhtYJphI3pqqR7EhbvUEQ2ykxyNEHOSWQOHkkaHHBnC645mU8MZjnfeKZUKqw6HBCofWyY3s+0FLWOcoBRzA8KnXtJxPxyBKXEu4AoBiKlQJPQGOq3JpQW5nW6j9yPzi3vb2qLqgGAiYJZGIAeh1gGgGBUYlytSSK7gbmr9t1UjSrZCBGSqDKm2KxgOFJZhBLbDl6hSMjILLhJE0QRGWZhBkyc7LnY1bcHu-aWkYyEVFoaGmBhCgVHOoHcDO-6NkBCGkYUSgUaEETUbE7JCFy3i8u02EgBUDHYLc9zMQmMhJtSf4ZjBCmtDmRKAKvAeYcf0ZQyBRaHqVE0pFjIYqAC3ACiGeY7wgFZIBmUGsmSnZEThsEnLqUKFT4d+2B1lBAEqR4wGCTyCggoKwpOVork+YRYmQnszHKaxqijuO9HBDOc5jkKS72muv7uFuypwWIu4rPuOz7HsR5STAp7nolV4gLe94PgSz7JKwRQ7h+bjIkAA)
  - [Encoding of a HOAS GADT](https://polytypic.github.io/f-omega-mu/#MQAgogdgxg9gJgSwgcxDAZiAhiAEgeQEEBlEAcUIBEAVAKFoBsBTAFxBYE8AHJkQHuAAwlgDOTYQC4AFACoQgJMIQ0gJTzFIALwhA3cAAncbIXSAdAG9aIEADUsDcSEAARAA8jF12-cfPnx6p0hHADTmIABCSHZORvYcUQBeRpI+ChyqsSoKYI5cfkngWX4pCn6xQa4AkugRzl6Z2SAARjAwDKq1Oa35-r7+pSCEXFxVUTFerm0giaoc6Xl1uQW9ADJYALZD0S6j7pLjuePT3ZPJSr0AYgiO6yOj45JHIAcKuY8gfvfTtAC+9FgQcPxtfSqWSaLTOex6AyKIxCUTCV7dHxIejMNjWFqaQDZwNV3GDxDitoT3JjIcCjFooBJYWJXkZKUZ0QBtRwAXS6yNRoSQGhA2KMmJimPiWkqz1S5Muu3JHHE+35pMM5Mp4mp8J0dOERjCEGZLMZHD1sTZmB8KQ5rAsFR5fI8FNlnUazXJLHtc3JTFdOXlQMVFKpIhp6vpFV1ICg7BAvHNbH6XGtzgFm20lVuzyUEs9-iTbhJPuhfpVAbVGqMsd1+uN7IgjAtyxW8f512Tmb2nSbhNzUOMBdVtPpdfLBpAmGjIHOPixCabIszdzTqjT2dcnbJPaLfc148HleRNbYKywLCgAAsGyvfcre+qtB6pUxGTo2ZSQLvOUwAG42Hl8D82cSRXYF35ZwDyPY9yzBIxWRAMwLHRBs8WcQJgm1M9BWFRwOFifEpnFPEpS0GU5Uw2IJl-BhQ0cFRJHIisHhOYIQCtSclUzR0GGdFt3S42joMkBBMFo9in3YY8mAgCMmAYURIwYixYzQiUiM6d503wzpnF4qY2UwsjPwo6CqKWVZFJnQCMjbDNNP00NJEwSQmUMpQ5LHC5TJTFTVIXKZ00YkBOUwTRaK8p5tOHF8JL4ZAcOSKyjEwVBHC+CKUQtU4sCgNhNC3JAWD1XK2UkYIB1y1QCsZUqFAKiYzJUyqIpYdMQBKiA8oq1rCvUupcqMPyQ2qyRtXatryuEmrLh6wjxB6idhrZA4fAcmw5pAAAGZy-NcJaKOqgBGJRNosQakDm06BrxSaZRm6QPlGJLRkkMtyuq+zDvcIbno6lbJAu1rpWmv7HAAWluol7qJbaVv25yYZUXdaIGp6vuq9LMomJlqoAVmcoA)
- See the [syntax summary](SYNTAX.md).
- See project [TODO](TODO.md) list.

## Why?

[Typed λ-calculi](https://en.wikipedia.org/wiki/Typed_lambda_calculus), and
[System F](https://en.wikipedia.org/wiki/System_F) in particular, are popular
elaboration targets for programming languages. Here are a couple of papers using
such an approach:

<blockquote>
  <dl>
    <dt><a href="https://people.mpi-sws.org/~rossberg/1ml/">1ML — core and modules united</a></dt>
    <dd>Andreas Rossberg</dd>
  </dl>
  <dl>
    <dt><a href="https://arxiv.org/abs/1206.5386">Elaborating Intersection and Union Types</a>
    <dd>Jana Dunfield</dd>
  </dl>
</blockquote>

Perhaps a practical System Fωμ implementation could serve as a reusable building
block or as a forkable boilerplate when exploring such programming language
designs.

System Fω might also be a good language for teaching functional programming:

<blockquote>
  <dl>
    <dt><a href="https://dl.acm.org/doi/abs/10.1145/3342713">Lambda: the ultimate sublanguage (experience report)</a></dt>
    <dd>Jeremy Yallop, Leo White<br><a href="https://github.com/ocamllabs/fomega">System Fω interpreter for use in Advanced Functional Programming course</a><dd>
  </dl>
</blockquote>
