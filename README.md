# Fωμ type checker &mdash; [![Build Status](https://travis-ci.org/polytypic/f-omega-mu.svg?branch=main)](https://travis-ci.org/polytypic/f-omega-mu)

A type checker for Fωμ roughly based on the article

<blockquote>
  <dl>
    <dt>
      <a href="https://dl.acm.org/doi/10.1145/2914770.2837660">
        System F-omega with Equirecursive Types for Datatype-generic Programming
      </a>
    </dt>
    <dd>Yufei Cai, Paolo G. Giarrusso, and Klaus Ostermann</dd>
  </dl>
</blockquote>

This is still very much Work-in-Progress with tons of missing features and
probably more bugs than one could imagine.

## Next steps

- Try the online playground:
  - [The traditional `fact`orial function](https://polytypic.github.io/f-omega-mu/#MQAgKgFgpiAuBOBDAJgS1qg9gO0QGxAAMAzRAY1kM3lXxGIFdsKtsAoNvKWe8ngXhCAe4FIUAXKmyxASYSTYAOjYgQgbuBsEqYuXLUxENhCATIhABGJdtjQDZ7SCh4AzjAMAqXhRAAKAwFpTAShBJNlEeAFYgA)
  - [Iterative `fib`onacci function](https://polytypic.github.io/f-omega-mu/#MQAgkgLgpgTghhAlgNyiABgM0QI3QewDs4BjExETAV0JKSICgGAbKCS3EAXgZBFfbN8+AA7cQgHuAhogFyJC7QEmEIeUpUKQy1QDpefEIG7gRHIXaDAKxMQzhK7v37EmEIRCATIhAAGPQ4gALKFdEH30oZgBnNGkxcxAACgoAahBzAEp41wBaEABGdPk9aK9c9SZsHFzPIA)
  - [Recursive `list` type encoding and `fold` function](https://polytypic.github.io/f-omega-mu/#MQAgSgpgxgrgTgZwJYDcIgAYBskIC4Yh4CeADuhAHZQD2AJkpQOYgCGldmAZjVnYVxjU8SGpQBQ4rBDxEy6HPhABeEIG7gPADpAPcCKtgACI4mgN6UkWAFwg4AGhC1KCK7MBJhCD0g3cAL6frIRklpWTMsFRBAbOAtCKM1KAtTcytbezEnIj8PV2tvTShNUICJYNTHcKjNNQALOgstDUsszRjK+MTLazsHdOysvx88vLSQGqIwwKkZEB4+cuijbRnagApsuH6ASn7M3Fk1yq5KOu2vSoAvC1iADycm8RAQG4BtOABdEHbws67h1TUruqVG4WJpLaaUEDLQ6PEBnLY3XwTEqkJAAfQYTCQeAQ4W6T0YeHeAGZIXiCe8AIyktL4yiEkAAFmpjlp9Kpy1CrNeGx5WwmSy5XMh-wsBMqTjFVxAAGoQAgtgAGEAo9FITHYoA)
  - [Generic `fold`](https://polytypic.github.io/f-omega-mu/#MQAg4gpgdhBOCWBjEADAZgewDYBMUCh8sIAXEEgTwAcIQAxAVykRI1hAF4RBu4DQC4AVICTCAQDpAAEQBDCQCNRACkkghIGQEplIeWhBKVO9SHhRCxMplyd8IEIGzgfsLG8AtpKp96TFmxBpR1mztpbkksAHMIGVhJDx09XX9AwMAe4BwMOmwcD2TtDRVpAKSbbgA3bNzEoqTQiKilbVcqAG0ctDUAXSbJdpA0jMsSjWNCCxwgA)
  - [List using a recursive sum type](https://polytypic.github.io/f-omega-mu/#MQAgMglgzgLiCuUIDsDmICGIBOBTAxvNkgG64hTwC2IMAngA64BQzANrnPUyG9HAF4QgbuAAFgBMAdIB7gGG0kBtZBDYAuEAG8AvgBoQ+APbIo6jRL1ytAXRApWHOMrYghgbOAYipy81aQ6vrC0NnbsnPpGUN7ukmLiqh7CcqoBXIqGxt5m4hZsvv78QbbI9mEoAGYoEDC4APJlUQkS8TJJKbSS6VAKMDYStM4hDrQYANa4AHINLaMT6ihwgEmEvAWLy4EezCAiyKrzMQAeJm0bW1sQ9cgggCZEIAAMtKK4xaenTt1Wm6e4bFAsL1uHfQYX6aT7-EBeITCAD6qm0kjePR0YP+nW8wnwcKatBy+XWWg6EXe+kkfQAFDAZpMycgALQARgAlCS5IyUVtfCFKWNxgpYNgUKgbABWEBk8qVap1PkwAVoGwAIgAYoBJ4GkCsZQA)
  - [Stack ADT using an existential type](https://polytypic.github.io/f-omega-mu/#MQAgygLghgxg1iAggEQCogK4GcCWA7AcxCjxAFMAPHLCMvCHKAGxAgE8AHMgKG6bIitOZEAHsODUaQC8IQN3AANwB0AbTxSyALhABvAL4AaEFlEBbLSAUBdEPj4ChXEE2qDZipYB7gFzVV4cTNr6RjBSWEEAFgAm2gpGEIHOrno2dvaC7E6QsAjuNDmaAFQggEmEIIVKOtwg5KYSbNqAAETK+fCWBtUgHNgRTcoKpcbQbQNlrQhxnRzifUrjloPikqQ6CswYFnFDBdsjetx6tni8-BCAUAzZ8AD044DQDNJnVTVkdewgsoDZwMpqAe+6h9ofIJrB0at0sBE-l8lHIKJplLDwkDLKpQngsH8dNE-hR4ixZBQsACkjRLFZQV1xFCEYTNMjlISQDAoFgRE8aiB-Pj5AB9TT6JSdDkgNQaTHEpY4KS6NZMDaxIzjQGuSwpCk1NEY9wAJ350QVrES9L0guFNRUJnMmNlGz+2qU0UVw1yIHtCQlEilKxtmydO2NVk6+z02kAwEQACkucAAlFcgbc0qdiDz5rIo0pwREVPgIDYAKwgSPOjM9bP0GwARkL6czZdzIAAzNXiy96nWrNHO0cTg4IKIecjPspPH2B65NPNRiTgTDwpPTeBi9MOCprMYmSy2ULOWL3HyBdvzVzxSBlaSQdvLSIdfyfQalbsJibDyLNZjsbJ7T68X9R8j7eMxL0oGNSHGkf6uO2ybjEAA)
  - [Stream fusion](https://polytypic.github.io/f-omega-mu/#MQAgygLgTgpghgWxAMwK4GcCWB7AdgKH1ACE50YATEPECACxhAAc4mYoiiRvJZEUMOXAC4QAMSjYkAGUzoI6WtnDR4CRRGUA5bPUy4A5iDgQQAQQA2FrtwAiqXAGM4uEAGFsqCAoA0IAEpSLiDSMOiOdProANaYAJ5+tjSQMADucFAQNiB03kzCAPQFjpgQYTDsAHRyEJVM6KiVlKgFAG6YaRTYjgUNCAgZcQD8XZgAvACMAAyVE7OzUwAslQDsi1MThCRkmI4gsI6oUFitjBY1tHFs+BYwphBXZxdjIIDdwK2VgD3A5-KVANq4TAWUQAbwAvn5HHh0KC6BRRK0-BBgSAfhAwQBdED6Qi3UyyeQgMb4bh4kCAixEkCAbOBagCgVTwSBRGjaFicaS7iAobhFC9aZVXnDhLVXsjhKy6Ty+SAQXCkRYwczURcIOyCJzTPpkPpSjAAPrYZBUgVC+G1T7iyWVaV-NU5KjI7Ea1FciBwaIG1z8i3uz36kTO0yAJMIVYSQ2H7oKRPpRQAPGHWkncbHG1yAEyIQFNaAwXSnyUC7Rjk9wYBZyCWUwnuWRGCDK-mKVTXvrhODKhSiz4Gynpc3HG3hbQFSzVWCbdCi9zKnCQAAKP1e+e4AC0EwAlNPkeue0qOa6tbo4M2Y7hapWyRZsNgmFTvtf8rGQKHWbHBZhhG+e5hjZgQAAeckcxgVxbVjdl5yvG950wABqDdNzLcgCwsP5wOdC8HyzZN9xBClIWhPxtV1MpDWQJEPS9Iijz3AguB0VwDiOE5GBgOMahAiBMDgSl5D4JAHmuMlACgGXg1F6VREEAaAZiU1S42BAeQYFvF4xUFdB-i6XAYFBCEQDiDoLHhWUhwgEdFL0mJMHyRT1WTMlBMYPi1GbWpAGAiDSQWcxBRHQPxtLjCBfOfRSylvUx0Fo+yuSNfVWX5OBBQTCULkS4T63zbykBeBNu0bNjTFU5LWUS6tnGQjL8xQ5tW3bP4tMYF4mV8sLjEg1L1wxPKqr7VSBzlYy4HMkrxz+AyyyoF49ha5S2rnErOsrMFkyVFr+OMAoSqk-cHOwOLnhpRLXmSrLjEqC87lE3oZJAat9zkzR9sJF5LT2tFhEUF9UqSmENJ7MAOwK27FHKuse24BqarbccCVqTs4C68H9MMya3n6ochtoFFIsqWGJ15P4EenWcFzei5HEqbduqqxTYhUpQnqyGmovzR7WQB06dq5AZ6epRLqQAI0FZARGPUMheO37JKQRKLogK70Buu7cHSntTpeDnpeplMAsKt4TvOmmeEBwLgZrCqkYhvBGreWrRshprVtC2aBds7WafGoz+0HQbzJxy2UzGlHGVnF4ReJigFSpCnkSdpTb1d9BEaNlMrPp1404+-40+VeOQET4sU+W-M4+l-Prq50wdQsMooBNI78jF-PrwsH6PrL2X8zxBWlcUfRVZp9XwEqLL3fJIGit+w2jYB3WzdB2UA4d23oc063GVL2bjyTsf8091HXnR32sd88cA+4H9mAj4C8xTwP9+j3PWu3wu79LcsYHPwOc6mynKRm28L9d6pzps2TOGk-g5wAW1JOSNi4plLutOAFcXRklYGwXAqM+Y-QmO3JBP0ABMeCXKdxTN3MAExegTF7hMDCXdLpgAIb0AhvcCF0LIW6R4ikqR-Aob5CYfhGG+QIeqAeVUh68NoRrOYp1fLJyqnPVSU8Qa1kXinChYDcHoDmBQk2EVaEL0qinZeLZV6QNAS8XhbCNYEJHmXORT8t5uwDg-PqPtRCY3FIpCYZ837cCDhNEOqMKbyixjwjRv8nRyM3oA5xb8f5vG0R9OY5jrLhKkd43OWJoEvzgcAxhYCiHoFsYwvRik2GGKXuvVSds17aQ3o42JO8XHBzcQNDxfsCG+L8QEr2TVQ4RyjpYgpkT-62RiTA+RKcEkZyKbY1J9MrFUmKVkxpky4G7iWk-JBKDkzpVimiJEZN5B+B5n4autc-DoJAhQMEogPLS2EAAKhCk8yoRiUwHJqKIQAAESJRKiFU6Q0exs2+SAP5dikEhRKmPHmvzEo-KFnOJuAtNyhiBYCsuAsx4XPYPCyoyKQoCxbmi0KUL0UdzHtczB+KMUUvJWSkhS0JL8SkhhLgABROMiAmC3BABgOABhP5zgzilQkX4eDS0psciAaEzyv24HOMSiBKg8zlWqdVWIRVxk-GeSocYQAvIITuGmSqpW4qgJq+cx1dW1ANQAUhANYq1G4kZmv4qq1gmqrXattfqkAsEQCurfu6tQlRqUUE1V-UNKqvnyCtegE1fiY0IEqHG2V6FE3rmzdm5Mc48Y4HdCAAArOuIAA)
  - [First-class type equality witnesses](https://polytypic.github.io/f-omega-mu/#MQAgYglgTgzgLgWgMYBsCGMYjgTwA4CmIBAjgK5ooS4gDu1AdgZswFCsoFzb5EAyBCACMGEAF4gAvCEDdwIEbgAHQzATcALAAESAx4ABcAKhCAkwhA6FGkHIMhTykBAYcuPQuAD2KACZTZileu17D-kYKABRqgM3AJiBhUQCUFqbm1rbsnNy4TgCiJJ4ypLoWgcYA3qwgIM4AZmCublogaopqqtXuZiDWhqRtygA0peUVAsKiYnUN6qpDIuLdFl2JfWVQBBUoY4rzZosgMDgAtnvrEwqbHcTZ1nLbcFBoDDBHTeoRXdbRndmJc59R186PqlOFnMhl6-QqUGch3qjUBPzOZzkrAAvjY7PZuFMRlJ+qkBi0PNJANnAiiJqhkaCEWgJ3QURL8BSUAAstAkFJSANryJSqBLxdoAXRAwSJERkAA9WVEFOK4ky0biHJUsTNiaShEpKVoVRJzBrKQqynjlqtPCS6QyAkpJWzxYaQHjdgczaTyVqdbT6fkrZyfFZ+XIhcEJVLFLL7XibncsGq6apRUohEhtYJphI3pqqR7EhbvUEQ2ykxyNEHOSWQOHkkaHHBnC645mU8MZjnfeKZUKqw6HBCofWyY3s+0FLWOcoBRzA8KnXtJxPxyBKXEu4AoBiKlQJPQGOq3JpQW5nW6j9yPzi3vb2qLqgGAiYJZGIAeh1gGgGBUYlytSSK7gbmr9t1UjSrZCBGSqDKm2KxgOFJZhBLbDl6hSMjILLhJE0QRGWZhBkyc7LnY1bcHu-aWkYyEVFoaGmBhCgVHOoHcDO-6NkBCGkYUSgUaEETUbE7JCFy3i8u02EgBUDHYLc9zMQmMhJtSf4ZjBCmtDmRKAKvAeYcf0ZQyBRaHqVE0pFjIYqAC3ACiGeY7wgFZIBmUGsmSnZEThsEnLqUKFT4d+2B1lBAEqR4wGCTyCggoKwpOVork+YRYmQnszHKaxqijuO9HBDOc5jkKS72muv7uFuypwWIu4rPuOz7HsR5STAp7nolV4gLe94PgSz7JKwRQ7h+bjIkAA)
- See the [syntax summary](SYNTAX.md).
- See project [TODO](TODO.md) list.

## Why?

[Typed λ-calculi](https://en.wikipedia.org/wiki/Typed_lambda_calculus), and
[System F](https://en.wikipedia.org/wiki/System_F) in particular, are popular
elaboration targets for programming languages. Here are a couple of papers using
such an approach:

<blockquote>
  <dl>
    <dt><a href="https://people.mpi-sws.org/~rossberg/1ml/">1ML — core and modules united</a></dt>
    <dd>Andreas Rossberg</dd>
  </dl>
  <dl>
    <dt><a href="https://arxiv.org/abs/1206.5386">Elaborating Intersection and Union Types</a>
    <dd>Jana Dunfield</dd>
  </dl>
</blockquote>

Perhaps a practical System Fωμ implementation could serve as a reusable building
block or as a forkable boilerplate when exploring such programming language
designs.

System Fω might also be a good language for teaching functional programming:

<blockquote>
  <dl>
    <dt><a href="https://dl.acm.org/doi/abs/10.1145/3342713">Lambda: the ultimate sublanguage (experience report)</a></dt>
    <dd>Jeremy Yallop, Leo White<br><a href="https://github.com/ocamllabs/fomega">System Fω interpreter for use in Advanced Functional Programming course</a><dd>
  </dl>
</blockquote>
