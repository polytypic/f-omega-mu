# Fωμ type checker &mdash; [![Build Status](https://travis-ci.org/polytypic/f-omega-mu.svg?branch=main)](https://travis-ci.org/polytypic/f-omega-mu)

A type checker for Fωμ roughly based on the article

<blockquote>
  <dl>
    <dt>
      <a href="https://dl.acm.org/doi/10.1145/2914770.2837660">
        System F-omega with Equirecursive Types for Datatype-generic Programming
      </a>
    </dt>
    <dd>Yufei Cai, Paolo G. Giarrusso, and Klaus Ostermann</dd>
  </dl>
</blockquote>

This is still very much Work-in-Progress with tons of missing features and
probably more bugs than one could imagine.

## Next steps

- Try the online playground:
  - [The traditional `fact`orial function](https://polytypic.github.io/f-omega-mu/#MQAgKgFgpiAuBOBDAJgS1qg9gO0QGxAAMAzRAY1kM3lXxGIFdsKtsAoNvKWEQHuBSKALlTYegJMIQIngF42IEIG7gbMNEA6OfMnEQ2EIBMiEAEYN82NF3HNIKHgDOMXQCp65HgApdAWiMBKSezYBHgBWIA)
  - [Iterative `fib`onacci function](https://polytypic.github.io/f-omega-mu/#MQAgkgLgpgTghhAlgNyiABgM0QI3QewDs4BjExETAV0JKSICgGAbKCS3EAXgZBFfaAe4Gb58ABwBciQu0BJhCGlyFMkPMXdefEIG7gRFJkA6bQCt9EI4TMHNWhZhCEQgEyIQABhtaIACyiPEHvihmAGc0EXEQYxAACgoAakiAShjHAFoQAEZk6U1wsTdM5SZsHEzXIA)
  - [Recursive `list` type encoding and `fold` function](https://polytypic.github.io/f-omega-mu/#MQAgSgpgxgrgTgZwJYDcIgAYBskIC4Yh4CeADuhAHZQD2AJkpQOYgCGldmAZjVnYVxjU8SGpQBQ4rBDxEy6QD3AOfAC4AVCEBJhCA0BeEIG7gPADpAAERxjAb0pIsKkHAA0IWpQT3Z25bM8OAvloOIIyS0rI2WCD6gNnAJtEWBlAq1rb2Ti5i7kSB3tnacH7GUMYRwRJhGW5RILHGBgAWdComRna5cQlJKXYOzq5Zvu2BBUVFmSCNRJEhUjIgCjx8KqYm5sYAFL5wwwCUwzm4PvsxHXVclM37+XUAXioJAB7u7cbiICBPANpwALog3dUbn1xvoDA9mnUnioXos6J88D9vn9ziB1iiHiAbnsngEZhVSEgAPoMJhIPAIar9T6MBEgADMqKpNL+AEZGZlqZRaQAWdluTm0tnrCICn47cV7Gaw0Wi1FglQ0uruRUYgDUIAQewADCACcSkKTyUA)
  - [Generic `fold`](https://polytypic.github.io/f-omega-mu/#MQAg4gpgdhBOCWBjEADAZgewDYBMUCh8sIAXEEgTwAcIQAxAVykRI1hAF4RBu4DQC4AVCEBJhCAEA6QABEAQykAjcQAppIkHICUqxWhArROjSHhRCxMplyd8IEIGzgfkNETeAW2lU+9JizYg046xs7WW5pLABzCDlYaU8dPV0AoKDAHuAcDDpsHE8U7U1RWUDkm24ANxy8pOLksMjolW03KgBtXLR1AF1m6Q6QdMzLUs1jQgscIA)
  - [List using a recursive sum type](https://polytypic.github.io/f-omega-mu/#MQAgMglgzgLiCuUIDsDmICGIBOBTAxvNkgG64hTwC2IMAngA64BQzANrnPUyAPYNwAvCEDdwIEbgAHQBtZL2S4AXCAAUASgA0FXlUUgxAXRApWHLo3KAe4DbQYCgFQhASYQgHw8RP5xlYzddh7VI2QTThBkCDYQYUBs4EkZOXJhNRAlPzgDIPZQ-DkoKJBYiREADwVJEqgFNL1pKG1ElWLNYqhA1Js9Q2MsuBQAMxQIGFwAeT78wpKyiQsWqo7JHOQoKQzikBbMnpALGAwAa1wAOQVAACJJFDhnarEnEBuo5hAC8uQFS6K5m4kn56Nx5AgQAmRCAAAy0AAWuGCfz+4TYq30v2euDYUBYsOem3wGHRIAA3sjMbJ5PkRGoJPDEeoibC6joycpSj4NpUbqoJEsVmsVHtDkdESpkABaACMgRaqlpIAAvls+ccpLBsChUIYAKwqfqDYZjJUwFVoQwAIgAYoBJ4AsxtUQA)
  - [Stack ADT using an existential type](https://polytypic.github.io/f-omega-mu/#MQAgygLghgxg1iAggEQCogK4GcCWA7AcxCjxAFMAPHLCMvCHKAGxAgE8AHMgKG6bIitOZEAHsOggLwhA3cCBG4AB0AbTyi8ZAFwgAFAEoANCCyiAtppByAuiHy9+g9lxCAe4CbUIGgFQhASYQhv0vIK4oLacoZuNBa6Nnh2AkJOkLAIgTQpXr7+CgDe3CDkJhJsWoAARIrp8Bb6+SAc2AAWZYpyWZUIrX7t1bUc4s0K3Z1iEjrhRtBVcrrcAL6x8RCAUAzJ8AD07YDQDJJLeQVkRewg0oDZwIoqaiLSeiBakYJWNQX1WA3HIGcKMhQait9YGnuFmUxjM720FEMFCwMTu7gsliedXE70+-0B8MU0LmWkAwETaVZwXRre6bWx8BJQAD63WkhIULwaSnwEGsAFYdPTGcz6NYAIycyZwBmNHmskAAZkFKQUB2KYssuiVCwpgmcEFEVPuGnKgyFFiyQNapz+AKGClqXPESisRhAMCgWBEewKIFU6neMj0FtdrouHuusJARsRtQKoKusghWnG0K0Q10Pt9ICUEfBkNYmvuNus0KDIdq83JGq17gVxBpQqAA)
  - [Stream fusion](https://polytypic.github.io/f-omega-mu/#MQAgygLgTgpghgWxAMwK4GcCWB7AdgKH1ACE50YATEPECACxhAAc4mYoiiRvJZEUMOXAC4QAMSjYkAGUzoI6WtnDR4CRRGUA5bPUy4A5iDgQQAQQA2FrtwAiqXAGM4uEAGFsqCAoA0IAEpSLiDSMOiOdProANaYAJ5+tjSQMADucFAQNiB03kzCAPQFjpgQYTDsAHRyEJVM6KiVlKgFAG6YaRTYjgUNCAgZcQD8XZgAvACMAAyVE7OzUwAslQDsi1MThBYwphBxbNRMpmMggN3AgI3AlQDauHgwogAUAJR+6FL3IOcAuiD6hCRkTCOECwRyoKBYVqMCw1Wj7GD4ba7eEgQA9wDD5MIAFQgQBJhCAcScLpVsEcQA9zn4MaZzk9fgRETsQrCxvhuEiQLhMBYQCdANnAlxud155Lpompnx+f3ZTMceEU-MupwAHsIlcr0MIJYK3ghGCcHsq-BqxSBtVKCDLTPpkPpSjAAPrYZAigWVFVqyqojVa2GXOW4dBXb4gZWhxTSs1M1EQODRR0iQAARJd9KZ8dq8Wa-a6lSJU+6fdrKmzuL8Xa5ACZEICmtAYltL3C5FmDXxL3BgFnIbdLGpAznIIAA3t2G7dcPqzs9Kk2Wz4R6XdRPToa1cbNdqnpUA0GQ2GHrH4w7cC3ybgALQTOkm+cAX3pJY5OFjItOedwtW7HPR2FJwlTmYlf8iUwP932LBtuEwF1MBAAAeTlaxgVxtyuVMpXJCwfyYckYIAahAS86Q7AcZzQ+8G0w0lqxLSNBybPxtz8G07TKJ1kD8A8EyY3Q4DvP4uB0VxQXBSFGBgZUaiQiBMDgHl5D4JA9jYRkIEAKAZeDUXpVEQQBoBlZK04QOeQYGwoklXQa4unHR4XhAOIOgsChHkpEB0FsmJMHyVyLQfJklMYeS1BfS5AGAiCyHnQV5M2M7DzlculIw5Z0HQlRUC3XP1KlUh5uw1OcGxVDL5E+Spe37RhhwgzlhSJKcrisidnhAUQYs+DC-SeL58ogxcX0cYQKSpDrrnsjsqBOYEWrKWL2uK2lWwbG8S1NQL+HOAptR0xK-OwFKWRAN1TmyvLOXEiAnl6HThFWpBLk-Ha9uKk4Y126lroAzLCuu8CIPHZVTDKsgKvnbgGpfKdZHkaduVnEG7Ic8bJzoJzPg4iwWs3SHahQkNkfJTRHt2CwXjhjzTKUQnb3I0sCYlXtttMAZybdPlACbgd1kBEOL8XZo7DUi07-ou9ArpukrsvnPL5y+iy4b+gHFHKoc4dBmrJ03eq1aaqaTJAVnvO6qruFGxzweR0QXIgdH4p+o3SyuE3EYeTmcgoNGVumvWDZV1zYnJ04ye+q4yea1zPf19AFqNpaGw9hS9cuhmUG5MooBzd18m5kAACMfwsd1joF+XhdF7TbqynKqqlqqZdt36zvDPsgeVu3VfHcGNbBg0Pd1uLI8No3HbNlHLetty67tqDmFdxD61b+2h4NZH3dD1q+6j+fiIReeG2Dv2RSt1fPfXgeqpDolA4svfPKP3vvLhmPSzjoL1pFpPWDYXBEcOwuJj8eXLy9AmKXeOSpC4ACZ-5nXAcLcBICX51w5P5VyIorhgAmC1P+4BwEtXARaCWVU0ETBFBqYhLUurS01BZRWzdKpG3QS+dAGCmHTjOsQphTcBx0Ltl3dW1xz4gDQeAkh6BhHkNvjNfuPtF5IxHmjTBm4fbcAdgjEUDxl6CIYScQ+5Ce6SIofPARAdmFzGvuTIhIoOHiJ1voh+p9SxgGERfHBojWH-WEaIzhwN568OXJ3LWei2pSPnjI5c5tUa0DHjAieRsVFjTURooRB8eS6IkUEgxrcjGiOuuA-h+8ThJJOJ46xYc76Rwfrebsz81qJ3rKpQcyVqQcVejUPwTM-C2gsKnPwH8kIUBvKIMKZdsSZixJUbhpZGk1FEMmSoGZ8Ri0pPOWm0yQCzMWR9Oa9imYzMuImdmFJMyszpAssubVTnx1ZvYzpqddmVEOfiXO2BibRTOVnRZ9jelfzuRsi5L9XmgO7DeLSCkdL3i4AAUWVIgJg2wQAYDgAYBEDwvqATAiWDSiBKgrPkKhd8G9ySYoQJUJmeKIBfDJT8FFqp8xhhxDA+cDwiWVBuewSl5IPS0pAAAUhAE49ll44ZMrLiS1glL2XUtArUMM+FBXz2FQpSoXyKCUqUYSkVUzcVkWvDvdVirNUQHZSaJ4JqTUlgeFjaoPEQAAFYnhAA)
  - [First-class type equality witnesses](https://polytypic.github.io/f-omega-mu/#MQAgYglgTgzgLgWgMYBsCGMYjgTwA4CmIBAjgK5ooS4gDu1AdgZswFCsoFzb5EAyBCACMGEAF4gAvCEDdwIEbgAHQzATcALAAESAx4ABcAKhCAkwhA6FGkHIMhTykBAYcuPQuAD2KACZTZileu17D-kYKABRqgM3AJiBhUQCUFqbm1rbsnNy4TgCiJJ4ypLoWgcYA3qwgIM4AZmCublogaopqqtXuZiDWhqRtygA0peUVAsKiYnUN6qpDIuLdFl2JfWVQBBUoY4rzZosgMDgAtnvrEwqbHcTZ1nLbcFBoDDBHTeoRXdbRndmJc59R186PqlOFnMhl6-QqUGch3qjUBPzOZzkrAAvjY7PZuFMRlJ+qkBi0PNJANnAiiJqhkaCEWgJ3QURL8BSUAAstAkFJSANryJSqBLxdoAXRAwSJERkAA9WVEFOK4ky0biHJUsTNiaShEpKVoVRJzBrKQqynjlqtPCS6QyAkpJWzxYaQHjdgczaTyVqdbT6fkrZyfFZ+XIhcEJVLFLL7XibncsGq6apRUohEhtYJphI3pqqR7EhbvUEQ2ykxyNEHOSWQOHkkaHHBnC645mU8MZjnfeKZUKqw6HBCofWyY3s+0FLWOcoBRzA8KnXtJxPxyBKXEu4AoBiKlQJPQGOq3JpQW5nW6j9yPzi3vb2qLqgGAiYJZGIAeh1gGgGBUYlytSSK7gbmr9t1UjSrZCBGSqDKm2KxgOFJZhBLbDl6hSMjILLhJE0QRGWZhBkyc7LnY1bcHu-aWkYyEVFoaGmBhCgVHOoHcDO-6NkBCGkYUSgUaEETUbE7JCFy3i8u02EgBUDHYLc9zMQmMhJtSf4ZjBCmtDmRKAKvAeYcf0ZQyBRaHqVE0pFjIYqAC3ACiGeY7wgFZIBmUGsmSnZEThsEnLqUKFT4d+2B1lBAEqR4wGCTyCggoKwpOVork+YRYmQnszHKaxqijuO9HBDOc5jkKS72muv7uFuypwWIu4rPuOz7HsR5STAp7nolV4gLe94PgSz7JKwRQ7h+bjIkAA)
  - [Encoding of a HOAS GADT](https://polytypic.github.io/f-omega-mu/#MQAgogdgxg9gJgSwgcxDAZiAhiAEgeQEEBlEAcUIBEAVAKFoBsBTAFxBYE8AHJkQHuAwADy4AnAFwAqEICTCEFIC8IQN3AgRuAAdIAAiQIPAkmXLUBhLAGcmxkFr2WV9LBDj8jp42IAUU2RICUehcp0e+gDetCAgAGpYDGIgGuphCYlJySkpKlYgKgA0oSAAQkgxcZqATcCagM3Aaq7psiV65T6yQqKZes0iIHWyluU5CQCS6EXxKe0gAEYwMAxtwh014HOt3Zl9IIRcXMOlaqkJY9V6JY2LLQuWJWsAMlgAttsaZXvJrmMLY8cZh7VeawBiCEEDyeewO306JwWnxW4OOtAAviAkPRmGxIjNFIBs4BGiSUQJxz0JiUxAV8aiUUBcTjMFjUlLU6IA2ioALogQRIiCMVj5JAgLHqTFlTGVJRDKH1clAt7kjhiD5qEm6TzkylianmLR04xqAoQZksxklQ3lNmYDkcTnctggQb8kDY3ZJCnypaTabklius7kpje+aK0kqilUkw0rX0wYGkBQdggXjI1HrTb2x1Cp3KIYHKFeKX+zIZ4lB-Qh9VhzXatQbLgGo1m9lWpM3W6pwUgzP595LduEpWBCSq0POWn05u140gTCJnkAjkCxXtsX51ywyFHXMpPtk0sakc62fj+vI60gW5YFhQAAWqeLA535dpjqUfplTEZWjZlKtJ74TAAblEYjFG8ejpIoZ4XpejKqGorIgCEYToq2ebqIIax6sh6YilKHAAF5iBKsiitKSzqEocoKoIeEgK4-5RNGgg+LRAEMHWIAcL8uS2pg84umM7oMJ6na+sJdGsXBrgIJgYmMgJn7sJeTAQHGTAMKY8acWE1aYWUeIUUsq55q+LHMkcbJUTRMlwYx1x3Dp5JZqRswtLp+JqDJE6uJgrhMtZXiaSAs72UuYI5qB65qFxIBJjx8Ymau4W1Eeyl8MgBFHChaiYKgggIt+SZ-FgUBsIoB5ICwhrlWyri5GO5V6FVjL1bIVU0SFBnNZyLAbnVEAVU1fXVXi+blZFiRRq1rh6gN-WNXJbVAqN5FiKNc4zWyHENj59GtQADP5UVhNtrGtQAjF4h00dNjU3YNC0rX1soPSwaiCBIHGXWEuWpK41bretk40Z9CTXYN-2TcNS1yqtAC0H1Et9hLHQD53+WjPjHjJk1-bdFWBUVbDI61ACs-lAA)
  - [Type-indexed trie](https://polytypic.github.io/f-omega-mu/#MQAgKgngDgpgtASwHYBMYA8YpAFwE4IwBQRANjDrtDCAPZSUC8Ig3cCCNwAHQDaStSMALhAAKAJQAaEAGdaAW0Eg2AXRDIS5SjmogAhqSatOLQE3A3AJJIAjELaSLAJiHGVashSqwQgHuAwBQQCoQQCTCEECQwOYWQC7gDhZAXuAOQAAiQEHgATDQ4NCOAGEdKRgpEGTM4qiQOJIdVG9c-KkBYXSm0UyI1lSm1o4AbyIQEABVJAQcIUSE-smp6Zmp+ko4kpEW2f648T6QAEF9EDGExKjLJKj7Dl9CECPyzIuaU5uQ4uE9SmvTlvXNgAUdBDx9idjoczv07ldLCJwQ84i0niIjpIPlMKgBfVRIdTuIYjEDMQDZwBNZiwAG4CeblDiran9fEAzrhWIAY3qtQKIDwHBZHBxOC4cRUJIxbkoO0oeJAhI4+KO0tOsRw1mhkISLBwjmh9kpdLSrS6LBZAjZhU53LF-KUXCOltOKkVuC1ag0IF+-wlUplxxlZzVAmVUL8Vy1sKpUx1DKyBtZeXZpqkHFdeAtVssNvsduFIpAsh0OCZAAt3R09Yyo0aY4VknLparRtDKXzkioWZnnV5SLRaABrACuUAEhySCXrixCZRCFMWzBzefzXGisQS47oDHKKl6-V57tVZMnsTEHBJG36Yv6BISnrlPsVfsD11rGrvwdiXYErwhQY4m36XZATJjIAbtMFiQpEXbWLKHbdn2KaWgKuCQuBx7AUgWpgY48pQb2UBWumFoOiAXb2N+ICoshibbnKXryr6-rCJq5SiPu4ECIihEYfYTEkVhMHWlwDHwZQ4F-gBQFTLw-ASiwB48HwNDMGIewrgsSjIVMMjyFJdZPpSPE4ba+FCcRUyokQ6KuGIQA)
- See the [syntax summary](SYNTAX.md).
- See project [TODO](TODO.md) list.

## Why?

[Typed λ-calculi](https://en.wikipedia.org/wiki/Typed_lambda_calculus), and
[System F](https://en.wikipedia.org/wiki/System_F) in particular, are popular
elaboration targets for programming languages. Here are a couple of papers using
such an approach:

<blockquote>
  <dl>
    <dt><a href="https://people.mpi-sws.org/~rossberg/1ml/">1ML — core and modules united</a></dt>
    <dd>Andreas Rossberg</dd>
  </dl>
  <dl>
    <dt><a href="https://arxiv.org/abs/1206.5386">Elaborating Intersection and Union Types</a>
    <dd>Jana Dunfield</dd>
  </dl>
</blockquote>

Perhaps a practical System Fωμ implementation could serve as a reusable building
block or as a forkable boilerplate when exploring such programming language
designs.

System Fω might also be a good language for teaching functional programming:

<blockquote>
  <dl>
    <dt><a href="https://dl.acm.org/doi/abs/10.1145/3342713">Lambda: the ultimate sublanguage (experience report)</a></dt>
    <dd>Jeremy Yallop, Leo White<br><a href="https://github.com/ocamllabs/fomega">System Fω interpreter for use in Advanced Functional Programming course</a><dd>
  </dl>
</blockquote>
